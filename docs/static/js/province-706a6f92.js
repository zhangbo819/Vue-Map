import{u as k}from"./vue-router@4.2.2_vue@3.2.47-f5537a5c.js";import{_ as z}from"./CityList.vue_vue_type_script_setup_true_lang-bae89eda.js";import{f as S,a as N,_ as C}from"./util-f75b57e6.js";import{r as q}from"./index-4c8947ff.js";import{e as B,w as g,c as O,E as D,k as E,r as h,s as u,z as M,f as $,x as y}from"./@vue_runtime-core@3.2.47-3f4c49b0.js";import{r as m,u as w}from"./@vue_reactivity@3.2.47-9d7d88d9.js";import{I}from"./@vue_shared@3.2.47-19384108.js";import"./vant@4.6.0_vue@3.2.47-8dfe671f.js";import"./@vant_use@1.5.2_vue@3.2.47-02c87728.js";import"./@vue_runtime-dom@3.2.47-0c0c6f75.js";const W=B({__name:"province",setup(J){const a=k(),d="echarts_"+new Date().getTime(),s=m({title:{text:"",top:"8%",left:"8%",textStyle:{fontSize:14,fontWeight:300,color:"#b6d7ff"}},tooltip:{padding:0,formatter:function(t,r){return t.name+"："+t.value}},legend:{orient:"vertical",top:"9%",left:"5%",icon:"circle",data:[],selectedMode:"single",selected:{},itemWidth:12,itemHeight:12,itemGap:30,inactiveColor:"#b6d7ff",textStyle:{color:"#ec808d",fontSize:14,fontWeight:300,padding:[0,0,0,15]}},visualMap:{min:0,max:80,left:"left",top:"bottom",text:["高","低"],inRange:{color:["#e0ffff","blue"]},show:!0},geo:{map:"",roam:!1,zoom:1,label:{normal:{show:!0,fontSize:10,color:"#000"},emphasis:{show:!0,color:"blue"}},itemStyle:{normal:{borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:"skyblue",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:20,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},left:"5%",right:"5%",top:"5%",bottom:"5%"},series:[{name:"年度总项目数据查询",type:"map",geoIndex:0,data:[]}],provinceJSON:{},provinceName:""}),i=m(null),l=m([]);g(()=>a.query.year,async()=>{l.value=await N(a.query.year)||[]},{immediate:!0});const e=O(()=>l.value.find(t=>t.name.includes(a.query.province)));g(()=>e.value,()=>p()),D(()=>{window.addEventListener("resize",v),p(),f()}),E(()=>{window.removeEventListener("resize",v)});let n=null;const p=async()=>{const t=a.query.provinceName,r=a.query.province,_=await S("../../utils/省份数据/json(省份)/"+t);s.value.geo.map=r,s.value.series[0].data=l.value.find(o=>o.name.includes(a.query.province)).children.map(o=>({name:o.name,value:o.count})),n=window.echarts.init(document.getElementById(d)),window.echarts.registerMap(r,_),n.setOption(s.value),n.on("click",o=>{console.log("params",o.name);const c=e.value.children.filter(x=>x.name.includes(o.name));console.log("target",c),c?i.value={count:e.value.count,name:e.value.name,children:c}:i.value=[]})},b=()=>{q.go(-1)},v=()=>{n&&n.resize&&n.resize()},f=()=>{console.log("this.provinceData",e.value),i.value=e.value};return(t,r)=>(y(),h("div",null,[u("header",null,[u("div",{onClick:r[0]||(r[0]=_=>b())},"返回"),w(e)?(y(),h("div",{key:0,class:"all",onClick:f},I(`${t.$route.query.province} 总 ${w(e).count} 个`),1)):M("",!0)]),u("div",{id:d,class:"o-echarts"}),$(z,{"province-data":i.value,"is-details":""},null,8,["province-data"])]))}});const X=C(W,[["__scopeId","data-v-b71ce5f8"]]);export{X as default};
